/* ============================
   En Garde Data â€“ Base Theme
   ============================ */

/* Light + dark tokens */
:root{
  --bg:#ffffff;
  --text:#0a1522;
  --muted:#5e6b7a;
  --link:#1a5cff;
  --accent:#edf2ff;
  --card:#f7f9ff;

  /* Accent color palette */
  --accent-blue:#1a5cff;
  --accent-purple:#7c3aed;
  --accent-teal:#0d9488;
  --accent-green:#059669;
  --accent-orange:#ea580c;
  --accent-pink:#db2777;

  /* Unified surfaces for code + math (light) */
  --code-bg:#f7f9ff;
  --code-border:rgba(0,0,0,.06);
  --code-text:var(--text);

  /* Prism token palette (light) */
  --tok-comment:#6b7280;
  --tok-key:#1d4ed8;
  --tok-func:#0d9488;
  --tok-str:#065f46;
  --tok-num:#7c3aed;
  --tok-op:#0f172a;
}
:root.dark{
  --bg:#0a0f17;
  --text:#e7edf7;
  --muted:#9bb0c9;
  --link:#8cb0ff;
  --accent:#0f1727;
  --card:#111827;

  /* Accent color palette (dark) */
  --accent-blue:#8cb0ff;
  --accent-purple:#c4b5fd;
  --accent-teal:#67e8f9;
  --accent-green:#86efac;
  --accent-orange:#fdba74;
  --accent-pink:#f9a8d4;

  /* Unified surfaces for code + math (dark) */
  --code-bg:#0f1727;
  --code-border:rgba(255,255,255,.10);
  --code-text:var(--text);

  /* Prism token palette (dark) */
  --tok-comment:#9aa7bd;
  --tok-key:#8cb0ff;
  --tok-func:#67e8f9;
  --tok-str:#86efac;
  --tok-num:#c4b5fd;
  --tok-op:#e5e7eb;
}

/* Global reset-ish */
*{ box-sizing:border-box }
html{ scroll-behavior:smooth }
body{
  margin:0;
  font-family:'Inter', system-ui, -apple-system, sans-serif;
  font-size:16px;
  line-height:1.7;
  font-weight:400;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Typography scale */
h1, h2, h3, h4, h5, h6{
  font-family:'Space Grotesk', system-ui, sans-serif;
  font-weight:600;
  line-height:1.2;
  margin:2rem 0 1rem;
  letter-spacing:-0.02em;
}
h1{ font-size:2.5rem; font-weight:700; margin-top:0 }
h2{ font-size:2rem }
h3{ font-size:1.5rem }
h4{ font-size:1.25rem }
p{ margin:0 0 1rem }
a{ color:var(--link); transition:color .2s ease }
.theme{ transition: background .2s linear, color .2s linear }
.container{ max-width:1000px; margin:0 auto; padding:1rem }
.flex{ display:flex } .between{ justify-content:space-between } .center{ align-items:center }
.small{ font-size:.9rem } .muted{ color:var(--muted) }

/* Skip link: hidden until keyboard focus */
.skip-link{
  position:absolute; left:-10000px; top:auto; width:1px; height:1px; overflow:hidden;
}
.skip-link:focus{
  left:1rem; top:1rem; width:auto; height:auto; padding:.5rem .75rem;
  background:var(--card); border:1px solid rgba(0,0,0,.15); border-radius:.5rem; z-index:1000;
}

/* ===== Header (glassy with faint blue tint) ===== */
.site-header{
  position:sticky; top:0; z-index:40;
  background:
    linear-gradient(180deg,
      rgba(26,92,255,.07),          /* faint blue top tint (light) */
      rgba(255,255,255,.45)         /* soft white bottom blend */
    );
  -webkit-backdrop-filter: blur(10px) saturate(140%);
  backdrop-filter: blur(10px) saturate(140%);
  box-shadow:0 0 0 rgba(0,0,0,0);
  transition: background .25s ease, box-shadow .25s ease, border-color .25s ease;
}
:root.dark .site-header{
  background:
    linear-gradient(180deg,
      rgba(26,92,255,.10),          /* slightly stronger blue tint (dark) */
      rgba(16,22,35,.45)            /* dark glass bottom blend */
    );
  border-bottom-color: rgba(255,255,255,.08);
}
/* inner highlight edge for glass */
.site-header::after{
  content:""; position:absolute; inset:0; pointer-events:none;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.35);
} 
/* stronger presence after small scroll */
.site-header.scrolled{
  box-shadow:0 8px 28px rgba(0,0,0,.10);
  border-bottom-color:rgba(0,0,0,.10);
}
:root.dark .site-header.scrolled{
  box-shadow:0 10px 36px rgba(0,0,0,.40);
  border-bottom-color:rgba(255,255,255,.10);
}

/* Brand + nav */
.brand{ font-weight:700; letter-spacing:.2px; color:var(--text); text-decoration:none }
.nav a{
  position:relative; display:inline-block;
  margin:0 .75rem; padding:.45rem .1rem;
  color:var(--text); text-decoration:none;
}
/* animated underline */
.nav a::after{
  content:""; position:absolute; left:0; right:0; bottom:.1rem; height:2px;
  transform:scaleX(0); transform-origin:left; background:var(--link);
  transition:transform .22s ease;
}
.nav a:hover::after{ transform:scaleX(1) }
.nav a.active{
  color:var(--link);
  font-weight:500;
}
.nav a.active::after{ transform:scaleX(1) }

/* Dark mode toggle button */
.dark-toggle{
  background:transparent; border:none; cursor:pointer;
  font-size:1.2rem; padding:.4rem; margin-left:.25rem;
  transition:transform .2s ease, opacity .2s ease;
  display:inline-flex; align-items:center; justify-content:center;
}
.dark-toggle:hover{ transform:scale(1.15); opacity:.85 }
.dark-toggle:active{ transform:scale(0.95) }

/* Scroll progress bar */
.scroll-progress{
  position:fixed;
  top:0;
  left:0;
  width:0%;
  height:3px;
  background:linear-gradient(90deg, var(--link), var(--accent-purple));
  z-index:100;
  transition:width .1s ease;
}

/* ===== Hero (full-bleed, layered, optional motion) ===== */
.hero{
  /* full-bleed background but align text to container */
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  padding: 3.5rem calc(50vw - 50%);
  padding-left: calc(50vw - 50% + 1rem);
  padding-right: calc(50vw - 50% + 1rem);

  position: relative; overflow:hidden;
  border-bottom:1px solid rgba(0,0,0,.06);

  background:
    radial-gradient(1200px 600px at 10% 30%, rgba(26,92,255,.08), transparent 60%),
    conic-gradient(from 200deg at 80% 20%, rgba(26,92,255,.08), transparent 40%, rgba(26,92,255,.06)),
    linear-gradient(180deg, var(--accent), transparent 70%);
}
.hero h1{
  margin:0 0 .5rem 0;
  letter-spacing:-0.02em;
  font-size:3rem;
  background: linear-gradient(135deg, var(--text) 0%, var(--link) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: gradient-shift 8s ease infinite;
}
@keyframes gradient-shift{
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}
.hero .lead{
  font-size:1.25rem;
  color:var(--muted);
  max-width:70ch;
  font-weight:500;
  line-height:1.6;
}
.scroll-indicator{
  position:absolute;
  bottom:2rem;
  left:50%;
  transform:translateX(-50%);
  color:var(--link);
  opacity:0.6;
  animation:bounce 2s ease-in-out infinite;
  cursor:pointer;
  z-index:2;
}
@keyframes bounce{
  0%, 100% { transform:translateX(-50%) translateY(0); }
  50% { transform:translateX(-50%) translateY(10px); }
}

@media (prefers-reduced-motion: no-preference){
  .hero{
    background-size:auto, 200% 200%, auto;
    animation: heroSheen 14s ease-in-out infinite alternate;
  }
  @keyframes heroSheen{
    0%   { background-position: center, 0% 50%, center; }
    100% { background-position: center, 100% 50%, center; }
  }
}

/* ===== Buttons, grids, cards, gallery ===== */
.btn{
  display:inline-block; background:var(--link); color:#fff;
  padding:.5rem .9rem; border-radius:10px; text-decoration:none;
  transition:opacity .15s ease, transform .15s ease;
}
.btn:hover{ opacity:.9; transform: translateY(-1px) }

/* Section spacing and headers */
.content-section{
  padding:4rem 0;
  border-bottom:1px solid rgba(0,0,0,.04);
}
:root.dark .content-section{
  border-bottom-color:rgba(255,255,255,.04);
}
.content-section:last-of-type{
  border-bottom:none;
}
.section-header{
  text-align:center;
  margin-bottom:3rem;
  max-width:700px;
  margin-left:auto;
  margin-right:auto;
}
.section-header h2{
  margin:0 0 .75rem;
  font-size:2.25rem;
  position:relative;
  display:inline-block;
}
.section-subtitle{
  color:var(--muted);
  font-size:1.1rem;
  margin:0;
}
.section-cta{
  margin-top:2.5rem;
  text-align:center;
}

.grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:1.5rem }

.post-card{
  background:var(--card);
  border-radius:16px;
  border:1px solid rgba(0,0,0,.06);
  overflow:hidden;
  transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
  display:flex;
  flex-direction:column;
  position:relative;
}
.post-card::before{
  content:'';
  position:absolute;
  top:0; left:0; right:0;
  height:3px;
  background:linear-gradient(90deg, var(--link), #8cb0ff);
  opacity:0;
  transition:opacity .25s ease;
}
.post-card:hover::before{ opacity:1 }
.post-card-image{
  position:relative;
  width:100%;
  padding-top:56.25%; /* 16:9 aspect ratio */
  overflow:hidden;
  background:var(--accent);
}
.post-teaser{
  position:absolute;
  top:0; left:0;
  width:100%;
  height:100%;
  object-fit:cover;
  transition:transform .35s ease;
}
.post-card:hover .post-teaser{
  transform:scale(1.05);
}
.post-card-content{
  padding:1.25rem;
  flex:1;
  display:flex;
  flex-direction:column;
}
.post-card h3{
  margin:0 0 .5rem;
  font-size:1.25rem;
  line-height:1.3;
}
.post-card h3 a{
  color:var(--text);
  text-decoration:none;
  transition:color .2s ease;
}
.post-card h3 a:hover{ color:var(--link) }
.post-card .muted{
  font-size:.875rem;
  margin-bottom:.75rem;
  font-weight:500;
}
.post-card p{
  margin:0 0 1rem;
  line-height:1.6;
  flex:1;
}
.tags{ margin:.5rem 0 0; display:flex; flex-wrap:wrap; gap:.5rem }
.tag{
  display:inline-block;
  padding:.25rem .65rem;
  border-radius:6px;
  font-size:.8rem;
  font-weight:500;
  text-decoration:none;
  transition:transform .2s ease, opacity .2s ease;
  background:rgba(26,92,255,.1);
  color:var(--accent-blue);
  border:1px solid rgba(26,92,255,.2);
}
.tag:hover{
  transform:translateY(-1px);
  opacity:.85;
}
/* Colored tag variants (cycling through accent colors) */
.tag:nth-child(6n+1){ background:rgba(26,92,255,.1); color:var(--accent-blue); border-color:rgba(26,92,255,.2) }
.tag:nth-child(6n+2){ background:rgba(124,58,237,.1); color:var(--accent-purple); border-color:rgba(124,58,237,.2) }
.tag:nth-child(6n+3){ background:rgba(13,148,136,.1); color:var(--accent-teal); border-color:rgba(13,148,136,.2) }
.tag:nth-child(6n+4){ background:rgba(5,150,105,.1); color:var(--accent-green); border-color:rgba(5,150,105,.2) }
.tag:nth-child(6n+5){ background:rgba(234,88,12,.1); color:var(--accent-orange); border-color:rgba(234,88,12,.2) }
.tag:nth-child(6n+6){ background:rgba(219,39,119,.1); color:var(--accent-pink); border-color:rgba(219,39,119,.2) }

/* Card / gallery hover micro-interactions */
.post-card:hover, .gallery-item:hover{
  transform: translateY(-4px);
  box-shadow: 0 12px 32px rgba(26,92,255,.12);
  border-color: rgba(26,92,255,.2);
}

/* Gallery */
.gallery{ display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:1.5rem }
.gallery-item{
  display:block;
  background:var(--card);
  border-radius:16px;
  overflow:hidden;
  border:1px solid rgba(0,0,0,.06);
  text-decoration:none;
  color:inherit;
  transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
  position:relative;
}
.gallery-item-image{
  position:relative;
  width:100%;
  padding-top:75%; /* 4:3 aspect ratio */
  overflow:hidden;
  background:var(--accent);
}
.gallery-item img{
  position:absolute;
  top:0; left:0;
  width:100%;
  height:100%;
  object-fit:cover;
  transition:transform .35s ease;
}
.gallery-item:hover img{
  transform:scale(1.08);
}
.gallery-overlay{
  position:absolute;
  inset:0;
  background:linear-gradient(180deg, transparent 0%, rgba(0,0,0,.7) 100%);
  opacity:0;
  transition:opacity .3s ease;
  display:flex;
  align-items:flex-end;
  padding:1rem;
}
.gallery-item:hover .gallery-overlay{
  opacity:1;
}
.caption{
  margin:0;
  font-weight:600;
  color:#fff;
  font-size:1rem;
  padding:1rem;
  position:relative;
  z-index:1;
}

/* Reveal on scroll */
.reveal{ opacity:0; transform: translateY(12px); transition: opacity .35s ease, transform .35s ease }
.reveal.in{ opacity:1; transform:none }

/* Pages & post content */
.page h1, .post h1{ margin-top:1rem }
.post-header{
  text-align:center;
  max-width:750px;
  margin:0 auto 3rem;
  padding-bottom:2rem;
  border-bottom:1px solid rgba(0,0,0,.06);
}
:root.dark .post-header{
  border-bottom-color:rgba(255,255,255,.06);
}
.post-header h1{
  margin-bottom:1rem;
  font-size:2.5rem;
  line-height:1.2;
}
.post-meta{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:1rem;
  color:var(--muted);
  font-size:.95rem;
  margin-bottom:1rem;
}
.post-reading-time::before{
  content:'â€¢';
  margin-right:1rem;
}
.post-content{
  max-width:750px;
  margin:0 auto;
  font-size:1.05rem;
  line-height:1.8;
}
.post-footer{
  max-width:750px;
  margin:3rem auto 0;
  padding-top:2rem;
  border-top:1px solid rgba(0,0,0,.06);
}
:root.dark .post-footer{
  border-top-color:rgba(255,255,255,.06);
}

/* Footer */
.site-footer{
  border-top:1px solid rgba(0,0,0,.06);
  margin-top:4rem;
  padding:3rem 0 2rem;
  background:var(--accent);
}
:root.dark .site-footer{
  border-top-color:rgba(255,255,255,.08);
}
.footer-content{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));
  gap:2rem;
  margin-bottom:2rem;
}
.footer-section h3{
  margin:0 0 .5rem;
  font-size:1.25rem;
}
.footer-section h4{
  margin:0 0 .75rem;
  font-size:1rem;
  color:var(--text);
}
.footer-desc{
  color:var(--muted);
  font-size:.95rem;
  line-height:1.6;
}
.footer-nav{
  display:flex;
  flex-direction:column;
  gap:.5rem;
}
.footer-nav a{
  color:var(--muted);
  text-decoration:none;
  font-size:.95rem;
  transition:color .2s ease, transform .2s ease;
  display:inline-block;
}
.footer-nav a:hover{
  color:var(--link);
  transform:translateX(4px);
}
.social-links{
  display:flex;
  gap:1rem;
}
.social-links a{
  color:var(--muted);
  transition:color .2s ease, transform .2s ease;
  display:inline-flex;
}
.social-links a:hover{
  color:var(--link);
  transform:translateY(-2px);
}
.footer-bottom{
  border-top:1px solid rgba(0,0,0,.06);
  padding-top:1.5rem;
  text-align:center;
}
:root.dark .footer-bottom{
  border-top-color:rgba(255,255,255,.06);
}
.footer-bottom p{ margin:0 }
.post-content img{ max-width:100%; border-radius:10px }

/* YouTube responsive wrapper */
.yt-wrapper{ position:relative; padding-bottom:56.25%; height:0; overflow:hidden; border-radius:12px }
.yt-wrapper iframe{ position:absolute; top:0; left:0; width:100%; height:100% }

/* ============================
   Prism + KaTeX Unifier
   ============================ */

/* Remove halo/ghosting and double backgrounds */
pre[class*="language-"], code[class*="language-"],
pre[class*="language-"] *, code[class*="language-"] *{ text-shadow:none !important }
code[class*="language-"]{ background:transparent !important }

pre[class*="language-"]{
  background:var(--code-bg) !important;
  color:var(--code-text);
  border:1px solid var(--code-border);
  border-radius:12px;
  padding:1rem;
  overflow:auto;
  box-shadow:none;
}

/* Prism token colors */
.token.comment, .token.prolog, .token.doctype, .token.cdata { color: var(--tok-comment) !important; }
.token.keyword, .token.atrule { color: var(--tok-key) !important; }
.token.function, .token.class-name { color: var(--tok-func) !important; }
.token.string, .token.char, .token.builtin { color: var(--tok-str) !important; }
.token.number, .token.boolean, .token.constant { color: var(--tok-num) !important; }
.token.operator, .token.punctuation { color: var(--tok-op) !important; }

/* KaTeX display block styled like code surface */
.katex-display{
  background:var(--code-bg);
  border:1px solid var(--code-border);
  border-radius:12px;
  padding:.75rem 1rem;
  margin:1rem 0;
  overflow-x:auto;
}
.katex{ color:var(--code-text) }

/* Hero canvas (Three.js background) */
.hero{ position: relative; min-height: 42vh; }
#hero-canvas{
  position: absolute; inset: 0;
  width: 100%; height: 100%;
  display: block; pointer-events: none; z-index: 0;
}
/* Keep hero text above canvas */
.hero > *:not(#hero-canvas){ position: relative; z-index: 1; }

/* Reduce motion: fully disable animation if user prefers no motion */
@media (prefers-reduced-motion: reduce){
  #hero-canvas{ display:none; }
}
html.__noTransition * { transition: none !important; }
